---
title: "Insulin Bone Marker Manuscript"
author: "Tim Vigers & Laura Pyle"
date: "`r format(Sys.time(), '%d %B %Y')`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tableone)
library(knitr)
library(tidyverse)
source("/Users/timvigers/Documents/GitHub/Tim-and-Laura/tim_R_functions.R")
```

```{r echo=FALSE,warning=FALSE}
# Read in dataset (approved by Viral and Vanessa)
full_data <- read.csv("/Volumes/som/PEDS/RI Biostatistics Core/Shared/Shared Projects/Laura/BDC/Projects/Viral Shah/Insulin bone marker/Manuscript/Data_Cleaned/full_data.csv")
# Calculate albumin-corrected calcium
full_data$CA_Corrected.0 <- 0.8*(4.5 - full_data$ALBS.0) + full_data$CA.0
```

### Table 1: Descriptive Statistics 

```{r echo=FALSE,include=FALSE}
# Table 1
vars = c("AgeAtVisit0","Gender","Ethnicity","Race","T1DDuration","BMI",
         "UnitsInsPerKg","HbA1c","InsDeliveryMethod","CurrUseCGM","Vitamin.D.0",
         "CA.0","ALBS.0","CA_Corrected.0","eGFR.0","CREA.S.0","ALP.0")
nonnormal <- norm.check(full_data,c("AgeAtVisit0","T1DDuration","BMI",
                                    "UnitsInsPerKg","HbA1c","Vitamin.D.0",
                                    "CA.0","ALBS.0","CA_Corrected.0","eGFR.0",
                                    "CREA.S.0","ALP.0"))
t1a <- CreateTableOne(vars,data = full_data)
t1a <- print(t1a, nonnormal = nonnormal, exact = c("Ethnicity","Race","CurrUseCGM"),
            printToggle = F)
t1 <- CreateTableOne(vars,strata = "group",data = full_data)
t1 <- print(t1, nonnormal = nonnormal, exact = c("Ethnicity","Race","CurrUseCGM"),
            printToggle = F)
t1 <- cbind(t1a,t1)
```

```{r echo=FALSE}
kable(t1[,1:(ncol(t1)-1)])
```

### Table 2: Baseline and relative change in BTM and related hormones

```{r echo=FALSE}
baseline_btm <- c("P1NP.0","CTX1.0","Osteocalcin.0","ON.0","OPG.0","IGF.0")
```