---
title: "CAID"
author: "Kristen Campbell"
date: "July 8, 2019"
output: word_document
editor_options: 
  chunk_output_type: console
---

```{r,echo=FALSE,message=FALSE,results='hide',warning=FALSE}
library(knitr)
source('S:/Shared Material/Shared Code/R/temp_table1.R')
options(scipen=999)
#code for data prep: 
source('C:/Users/campbkri/Documents/GitHub/BDC-Code/Kimber Simmons/CAID/data_prep.R')
source('C:/Users/campbkri/Documents/GitHub/BDC-Code/Kimber Simmons/CAID/family_hx.R')


#######Summary by Disease########

#THYROID:
tab.thy<-final_table(dat,c('Age_AtDX','Gender','RaceEthinicity_cat','BMI_AtDX'),
                     dat$thyroid_yn,margin=2,single=F,2,col.names=T, summary.stat='mean')

tab.thy

#CELIAC:
tab.cel<-final_table(dat,c('Age_AtDX','Gender','RaceEthinicity_cat','BMI_AtDX'),
                     dat$celiac_yn,margin=2,single=F,2,col.names=T, summary.stat='mean')

tab.cel

#ADDISON:
tab.add<-final_table(dat,c('Age_AtDX','Gender','RaceEthinicity_cat','BMI_AtDX'),
                     dat$addison_yn,margin=2,single=F,2,col.names=T, summary.stat='mean')

tab.add


#######FAMILY HISTORY TABLE########

tab.any<-final_table(dat.c.full,names(dat.c.full[,c(which(colnames(dat.c.full)=="Addison.s.disease_Any"):
                                                  which(colnames(dat.c.full)=="Other_Any"))]),dat.c.full$EPICMRN,margin=2,single=T,2,col.names=T, summary.stat='median')
tab.any$row_num<-rep(1:nrow(tab.any))
#1st degree
tab.1st<-final_table(dat.c.full,names(dat.c.full[,c(which(colnames(dat.c.full)=="Addison.s.disease_1stDegree"):
                                                  which(colnames(dat.c.full)=="Other_1stDegree"))]),dat.c.full$EPICMRN,margin=2,single=T,2,col.names=T, summary.stat='median')
tab.1st$row_num<-rep(1:nrow(tab.1st))

tab.oth<-final_table(dat.c.full,names(dat.c.full[,c(which(colnames(dat.c.full)=="Addison.s.disease_Other"):
                                                  which(colnames(dat.c.full)=="Other_Other"))]),dat.c.full$EPICMRN,margin=2,single=T,2,col.names=T, summary.stat='median')
tab.oth$row_num<-rep(1:nrow(tab.oth))

tab.co1<-merge(tab.any,tab.1st,by="row_num")
tab.co<-merge(tab.co1,tab.oth,by="row_num")
tab.co<-tab.co[c(2,3,5,7)]
colnames(tab.co)<-c("Diagnosis","Any Family Member","1st Degree Family Member","Non-1st Degree Family Member")
tab.co$Diagnosis<-substr(tab.co$Diagnosis,3,nchar(tab.co$Diagnosis)-6)
tab.co$n<-as.numeric(sub(" *\\(.*", "", tab.co$`Any Family Member`))
tab.co<-tab.co[order(tab.co$n,decreasing = T),]
tab.co<-tab.co[,-5]

```

#CAID Summary Statistics


**Table 1: Family History - ANY**
```{r,echo=FALSE,message=FALSE,results='asis',warning=FALSE}
kable(tab.co, align = c("l", "l"))
```
