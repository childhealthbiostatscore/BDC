---
title: "DCCT/EDIC"
author: "Tim Vigers & Laura Pyle"
date: "`r format(Sys.time(), '%d %B %Y')`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_knit$set(root.dir = "T:/Janet Snell-Bergeon/CACTI DCCT EDIC omics R01/")
library(arsenal)
library(skimr)
library(knitr)
library(tidyverse)
library(caret)
```

```{r}
# Study information
df = read.delim("T:/Janet Snell-Bergeon/CACTI DCCT EDIC omics R01/Raw data/QEDIC_WP_DDA_60SPD_StudyInformat.txt")
# Convert to categorical

# Proteins
prot = read.delim("./Raw data/EDIC_WP_DDA_60SPD_Proteins.txt")
rownames(prot) = prot$Accession
X = prot[,grep("Normalized",colnames(prot))]
colnames(X) = sub("Abundances..Normalized...","",colnames(X))
colnames(X) = sub("..Sample","",colnames(X))
# Transpose proteins, log transform, and remove low variance items
X = as.data.frame(t(X))
no_var = nearZeroVar(X)
X = X[,-c(no_var)]
X = log(X)
X$File.ID = rownames(X)
df = left_join(df,X,by = "File.ID")
# Clean up workspace
rm(X)
```

```{r}
skim(df)
```
